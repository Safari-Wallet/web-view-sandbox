<script>
    import { onMount } from 'svelte';
    import hidden from '$lib/stores/hidden';

    let popup;

    const togglePopup = (value) => {
        if (!$hidden.connectWalletTwo) {
            popup.style.transform = `translateY(-24px)`;
        } else {
            popup.style.transform = `translateY(100%)`;
        }
    };

    onMount(() => {
        hidden.subscribe(togglePopup);
    });
</script>

<div bind:this={popup} class="popup">
    <div class="icons">
        <svg class="icons__aa" width="19px" height="14px" viewBox="0 0 19 14" version="1.1">
            <title>aa</title>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Artboard" transform="translate(-709.000000, -776.000000)" fill="#000200" fill-rule="nonzero">
                    <path d="M718.645996,789.132812 C719.077637,789.132812 719.301758,788.966797 719.459473,788.501953 L720.530273,785.571777 L725.427734,785.571777 L726.498535,788.501953 C726.65625,788.966797 726.87207,789.132812 727.303711,789.132812 C727.743652,789.132812 728.025879,788.867188 728.025879,788.452148 C728.025879,788.311035 728.000977,788.178223 727.93457,788.003906 L724.041504,777.63623 C723.850586,777.129883 723.510254,776.872559 722.979004,776.872559 C722.464355,776.872559 722.115723,777.121582 721.933105,777.62793 L718.040039,788.012207 C717.973633,788.186523 717.94873,788.319336 717.94873,788.460449 C717.94873,788.875488 718.214355,789.132812 718.645996,789.132812 Z M720.937012,784.310059 L722.954102,778.723633 L722.995605,778.723633 L725.012695,784.310059 L720.937012,784.310059 Z M709.805664,789.10791 C710.145996,789.10791 710.370117,788.933594 710.50293,788.526855 L711.191895,786.493164 L714.4375,786.493164 L715.126465,788.526855 C715.259277,788.950195 715.483398,789.10791 715.832031,789.10791 C716.24707,789.10791 716.529297,788.850586 716.529297,788.477051 C716.529297,788.311035 716.487793,788.15332 716.421387,787.979004 L713.839844,781.122559 C713.648926,780.616211 713.300293,780.350586 712.810547,780.350586 C712.329102,780.350586 711.980469,780.599609 711.789551,781.122559 L709.208008,787.979004 C709.141602,788.136719 709.116699,788.302734 709.116699,788.477051 C709.116699,788.858887 709.382324,789.10791 709.805664,789.10791 Z M711.557129,785.414062 L712.719238,781.952637 L712.910156,781.952637 L714.072266,785.414062 L711.557129,785.414062 Z" id="aa"/>
                </g>
            </g>
        </svg>
        <div class="icons__pulse" />
        <svg class="icons__puzzle" width="16px" height="13px" viewBox="0 0 16 13" version="1.1">
            <title>puzzle copy 2</title>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Artboard" transform="translate(-358.000000, -846.000000)" fill="#8E8E92" fill-rule="nonzero">
                    <g id="puzzle-copy-2" transform="translate(358.618652, 846.127754)">
                        <path d="M0,10.4856339 C0,11.1671473 0.175833384,11.6841672 0.527500153,12.0366936 C0.879166921,12.3892199 1.3956248,12.5654831 2.07687378,12.5654831 L9.86862183,12.5654831 C10.5569458,12.5654831 11.0780487,12.3906581 11.4319305,12.041008 C11.7858124,11.6913579 11.9627533,11.1786855 11.9627533,10.5029907 L11.9627533,8.05944061 C11.9627533,7.99060822 11.9849701,7.94729869 12.0294037,7.92951202 C12.0738373,7.91172536 12.1251144,7.92352804 12.1832352,7.96492004 C12.2923355,8.03633118 12.4061139,8.10065079 12.5245705,8.15787888 C12.643027,8.21510696 12.770443,8.26091258 12.9068184,8.29529572 C13.0431938,8.32967885 13.188975,8.34687042 13.344162,8.34687042 C13.7346751,8.34687042 14.0832507,8.25815201 14.3898888,8.08071518 C14.6965268,7.90327835 14.9378204,7.65980275 15.1137695,7.35028839 C15.2897186,7.04077403 15.3776932,6.68996684 15.3776932,6.29786682 C15.3776932,5.90735372 15.2897186,5.55733999 15.1137695,5.24782562 C14.9378204,4.93831126 14.6965268,4.69485219 14.3898888,4.51744843 C14.0832507,4.34004466 13.7346751,4.25134277 13.344162,4.25134277 C13.188975,4.25134277 13.0431938,4.26853434 12.9068184,4.30291748 C12.770443,4.33730062 12.643027,4.3830897 12.5245705,4.44028473 C12.4061139,4.49747976 12.2923355,4.56247711 12.1832352,4.63527679 C12.1251144,4.67534637 12.0738373,4.6864713 12.0294037,4.66865158 C11.9849701,4.65083186 11.9627533,4.6075058 11.9627533,4.5386734 L11.9627533,2.06040955 C11.9627533,1.38478088 11.7858124,0.872472127 11.4319305,0.523483276 C11.0780487,0.174494425 10.5569458,0 9.86862183,0 L2.07687378,0 C1.3956248,0 0.879166921,0.175932566 0.527500153,0.527797699 C0.175833384,0.879662832 0,1.39698029 0,2.07975006 L0,4.83304596 C0,5.07260386 0.0768661499,5.25914892 0.23059845,5.39268112 C0.38433075,5.52621333 0.563090007,5.59297943 0.766876221,5.59297943 C0.890126546,5.59297943 1.01340993,5.56606801 1.13672638,5.51224518 C1.26004283,5.45842234 1.37238312,5.37550608 1.47374725,5.2634964 C1.56168874,5.17171987 1.66802851,5.07247162 1.79276657,4.96575165 C1.91750463,4.85903168 2.06996409,4.76747004 2.25014496,4.69106674 C2.43032583,4.61466344 2.64717102,4.57646179 2.90068054,4.57646179 C3.21806335,4.57646179 3.50721232,4.65362549 3.76812744,4.80795288 C4.02904256,4.96228027 4.23701096,5.17163722 4.39203262,5.43602371 C4.54705429,5.70041021 4.62658183,5.99486542 4.63061523,6.31938934 C4.63464864,6.64232635 4.55915451,6.9356575 4.40413284,7.19938278 C4.24911118,7.46310806 4.03945669,7.67286174 3.77516937,7.8286438 C3.51088206,7.98442586 3.21938578,8.06231689 2.90068054,8.06231689 C2.64717102,8.06231689 2.43032583,8.02411524 2.25014496,7.94771194 C2.06996409,7.87130864 1.91750463,7.77901967 1.79276657,7.67084503 C1.66802851,7.56267039 1.56168874,7.46272786 1.47374725,7.37101746 C1.37238312,7.26178487 1.26004283,7.18027369 1.13672638,7.12648392 C1.01340993,7.07269414 0.890126546,7.04579926 0.766876221,7.04579926 C0.563090007,7.04579926 0.38433075,7.11256536 0.23059845,7.24609756 C0.0768661499,7.37962977 0,7.56617483 0,7.80573273 L0,10.4856339 Z" id="Path"/>
                    </g>
                </g>
            </g>
        </svg>
        <svg class="icons__arrow" version="1.1" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 122.883 122.882" enable-background="new 0 0 122.883 122.882" xml:space="preserve">
            <g>
                <path fill="#377bf6" d="M61.441,0L61.441,0l0.001,0.018c16.974,0,32.335,6.872,43.443,17.98s17.98,26.467,17.98,43.441h0.018v0.002l0,0h-0.018 c0,16.976-6.873,32.335-17.98,43.443c-11.109,11.107-26.467,17.979-43.442,17.979v0.018h-0.002l0,0v-0.018 c-16.975,0-32.335-6.872-43.443-17.98C6.89,93.775,0.018,78.417,0.018,61.442H0v-0.001V61.44h0.018 c0-16.975,6.872-32.334,17.98-43.443C29.106,6.89,44.465,0.018,61.44,0.018L61.441,0L61.441,0L61.441,0z M71.701,42.48 c1.908-1.962,1.863-5.101-0.098-7.009c-1.963-1.909-5.102-1.865-7.01,0.097L42.755,58.088l3.553,3.456l-3.568-3.46 c-1.911,1.971-1.863,5.118,0.108,7.029c0.058,0.056,0.116,0.109,0.175,0.162l21.571,22.057c1.908,1.962,5.047,2.006,7.01,0.097 c1.961-1.908,2.006-5.047,0.098-7.01L53.227,61.529L71.701,42.48L71.701,42.48z"></path>
            </g>
        </svg>
    </div>
    <div class="text">
        Tap to open wallet
    </div>
</div>

<style>
    @keyframes pulsate {
        0% {
            opacity: 1;
            transform: scale(.6, .6);
        }
        50% {
            border-width: 2px;
            opacity: .34;
        }
        100% {
            border-width: 1px;
            opacity: .1;
            transform: scale(1, 1);
        }
    }
    .popup {
        align-items: center;
        background-color: #edf4fd;
        border-radius: 8px;
        bottom: 0;
        column-gap: 20px;
        display: flex;
        font-size: 18px;
        height: 45px;
        justify-content: flex-start;
        left: 24px;
        position: fixed;
        transform: translateY(100%);
        transition: transform .3s;
        width: calc(100vw - 48px);
        will-change: transform;
        z-index: 10000000;
        .icons {
            align-items: center;
            column-gap: 2px;
            display: flex;
            padding-left: 20px;
            .icons__aa {
                margin-right: -2px;
            }
            .icons__pulse {
                border: 3px solid #377bf6;
                border-radius: 50%;
                height: 4px;
                margin: -15px auto 0;
                position: relative;
                width: 4px;
                &:before, &:after {
                    animation: pulsate 1.6s ease-in infinite;
                    border: 2px solid #077dff;
                    border-radius: 50%;
                    bottom: -7px;
                    content: '';
                    height: 10px;
                    left: -7px;
                    opacity: 0;
                    position: absolute;
                    width: 10px;
                    z-index: 99;
                }
                &:after {
                    animation-delay: 1s;
                }
            }
            .icons__arrow {
                margin-left: 8px;
            }
        }
        .text {
            padding-right: 20px;
        }
    }
</style>
